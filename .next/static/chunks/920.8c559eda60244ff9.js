(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{1782:()=>{},4920:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var r=n(7876),a=n(4232);let l=(0,a.createContext)(null);function o(){let e=(0,a.use)(l);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var u=n(6895),i=n.n(u);let c=(0,a.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:o,id:i,placeholder:c,style:s,whenReady:d,zoom:f,...p},m){let[h]=(0,a.useState)({className:o,id:i,style:s}),[v,x]=(0,a.useState)(null),b=(0,a.useRef)(void 0);(0,a.useImperativeHandle)(m,()=>v?.map??null,[v]);let g=(0,a.useCallback)(r=>{if(null!==r&&!b.current){let a=new u.Map(r,p);b.current=a,null!=n&&null!=f?a.setView(n,f):null!=e&&a.fitBounds(e,t),null!=d&&a.whenReady(d),x(Object.freeze({__version:1,map:a}))}},[]);(0,a.useEffect)(()=>()=>{v?.map.remove()},[v]);let y=v?a.createElement(l,{value:v},r):c??null;return a.createElement("div",{...h,ref:g},y)});var s=n(8477);function d(e,t){let n=(0,a.useRef)(t);(0,a.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function f(e,t){let n=(0,a.useRef)(void 0);(0,a.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function p(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function m(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function h(e,t){return null==t?function(t,n){let r=(0,a.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let l=(0,a.useRef)(void 0);l.current||(l.current=e(n,r));let o=(0,a.useRef)(n),{instance:u}=l.current;return(0,a.useEffect)(function(){o.current!==n&&(t(u,n,o.current),o.current=n)},[u,n,t]),l}}function v(e){return function(t){var n;let r=o(),l=e(p(t,r),r);return d(r.map,t.attribution),f(l.current,t.eventHandlers),n=l.current,(0,a.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),l}}let x=function(e,t){var n;return n=v(h(e,t)),(0,a.forwardRef)(function(e,t){let{instance:r}=n(e).current;return(0,a.useImperativeHandle)(t,()=>r),null})}(function({url:e,...t},n){return m(new u.TileLayer(e,p(t,n)),n)},function(e,t,n){let{opacity:r,zIndex:a}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=a&&a!==n.zIndex&&e.setZIndex(a);let{url:l}=t;null!=l&&l!==n.url&&e.setUrl(l)}),b=function(e,t){var n;return n=v(h(e,t)),(0,a.forwardRef)(function(e,t){let{instance:r,context:o}=n(e).current;(0,a.useImperativeHandle)(t,()=>r);let{children:u}=e;return null==u?null:a.createElement(l,{value:o},u)})}(function({position:e,...t},n){var r;let a=new u.Marker(e,t);return m(a,(r={overlayContainer:a},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),g=function(e,t){var n,r;return n=h(e),r=function(e,r){let a=o(),l=n(p(e,a),a);return d(a.map,e.attribution),f(l.current,e.eventHandlers),t(l.current,a,e,r),l},(0,a.forwardRef)(function(e,t){let[n,l]=(0,a.useState)(!1),{instance:o}=r(e,l).current;(0,a.useImperativeHandle)(t,()=>o),(0,a.useEffect)(function(){n&&o.update()},[o,n,e.children]);let u=o._contentNode;return u?(0,s.createPortal)(e.children,u):null})}(function(e,t){return m(new u.Popup(e,t.overlayContainer),t)},function(e,t,{position:n},r){(0,a.useEffect)(function(){let{instance:a}=e;function l(e){e.popup===a&&(a.update(),r(!0))}function o(e){e.popup===a&&r(!1)}return t.map.on({popupopen:l,popupclose:o}),null==t.overlayContainer?(null!=n&&a.setLatLng(n),a.openOn(t.map)):t.overlayContainer.bindPopup(a),function(){t.map.off({popupopen:l,popupclose:o}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(a)}},[e,t,r,n])});n(1782),delete i().Icon.Default.prototype._getIconUrl,i().Icon.Default.mergeOptions({iconRetinaUrl:"/_next/static/media/marker-icon-2x.93fdb12c.png",iconUrl:"/_next/static/media/marker-icon.d577052a.png",shadowUrl:"/_next/static/media/marker-shadow.612e3b52.png"});let y=e=>{let{lat:t,lon:n,cityName:l}=e,[o,u]=(0,a.useState)([]),[i,s]=(0,a.useState)(!1),[d,f]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{s(!0),f(null);try{var e;let r=await fetch("https://api.weather.gov/alerts/active?point=".concat(t,",").concat(n));if(!r.ok)throw Error("API error: ".concat(r.status));let a=(null!=(e=(await r.json()).features)?e:[]).map(e=>({id:e.id,event:e.properties.event,headline:e.properties.headline,severity:e.properties.severity,description:e.properties.description}));u(a)}catch(e){console.error("Error fetching alerts",e),f("Failed to load weather alerts.")}finally{s(!1)}})()},[t,n]),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold mb-2",children:["Radar & Alerts for ",l||"Selected Location"]}),(0,r.jsxs)(c,{center:[t,n],zoom:7,scrollWheelZoom:!1,className:"w-full h-[400px] rounded shadow border",children:[(0,r.jsx)(x,{attribution:'\xa9 <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,r.jsx)(b,{position:[t,n],children:(0,r.jsx)(g,{children:l})})]}),i&&(0,r.jsx)("p",{className:"mt-4 text-gray-500",children:"Loading alerts..."}),d&&(0,r.jsx)("p",{className:"mt-4 text-red-500",children:d}),!i&&!d&&(o.length>0?(0,r.jsxs)("div",{className:"mt-4 p-4 border border-yellow-400 bg-yellow-100 rounded",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"⚠️ Weather Alerts"}),(0,r.jsx)("ul",{className:"mt-2 space-y-2",children:o.map(e=>(0,r.jsxs)("li",{className:"border p-2 rounded bg-white shadow",children:[(0,r.jsxs)("p",{className:"font-bold",children:[e.event," — ",(0,r.jsx)("span",{className:"text-red-500",children:e.severity})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.headline}),(0,r.jsx)("p",{className:"text-xs mt-1",children:e.description})]},e.id))})]}):(0,r.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"No active alerts for this area."}))]})}}}]);